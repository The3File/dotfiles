#!/usr/bin/env bash

percent="$(acpi -b | sed 's/,//g;s/://g;s/%//g' | awk '{print $4}')"
state="$(acpi -b | sed 's/,//g;s/://g;s/%//g' | awk '{print $3}')"

[[ $state = Charging ]] && state=""
[[ $state = Discharging ]] && {
    [[ $percent -gt 80 ]] && state=""
    [[ $percent -le 80 ]] && state=""
    [[ $percent -le 65 ]] && state=""
    [[ $percent -le 35 ]] && state=""
    [[ $percent -le 15 ]] && state=""
}

if [[ $percent -le "15" ]]; then
    echo -e "<span color='red'>$state  $percent%</span>\n" 
else
    echo "$state  $percent%"; 
fi
