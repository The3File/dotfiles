#!/usr/bin/env dash

bspc subscribe | while read line; do

    W=$(bspc query -N -n .local.\!floating | wc -l)

    G=$(echo "30 - ($W - 1) * 10" | bc)
    P=$(echo "80 - ($W - 1) * 40" | bc)

    [ $P -le 0 ] && P=0
    bspc config left_padding $P
    bspc config right_padding $P

    [ $G -le 5 ] && G=5
    bspc config --desktop focused window_gap $G
done
