#!/usr/bin/env bash

bspc subscribe | while read line; do
   W=$(bspc query -N -n .local.\!floating | wc -l)
   G=$(echo "26.061224-($W-1)*7" | bc)
   P=$(echo "81 - ($W - 1) * 60" | bc)
   [[ $W -le 1 ]] && W=1
   [[ $P -lt 0 ]] && P=0
   [[ $G -lt 0 ]] && G=0
   bspc config --desktop focused left_padding $P
   bspc config --desktop focused right_padding $P
   bspc config --desktop focused window_gap $G
done
