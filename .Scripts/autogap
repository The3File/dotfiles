#!/usr/bin/env dash

bspc subscribe | while read line; do

    W=$(bspc query -N -n .local.\!floating | wc -l)

    [ $W -le 1 ] && W=1

    G=$(echo "20 - ($W - 1) * 8" | bc)
    P=$(echo "80 - ($W - 1) * 60" | bc)

    [ $P -le 0 ] && P=0
    bspc config left_padding $P
    bspc config right_padding $P

    [ $G -le 0 ] && G=0
    bspc config --desktop focused window_gap $G
done
