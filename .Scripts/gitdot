#!/usr/bin/env bash

main(){
    rsync -ai --delete --dry-run $HOME/.config/{dunst,i3,nvim,qutebrowser,polybar,ranger,wal,compton.conf} ~/dotfiles/.config/
    rsync -ai --delete --dry-run $HOME/.Scripts $HOME/dotfiles/
    rsync -ai --delete --dry-run $HOME/{suckless,.latexmkrc,.nvimrc,.profile,.vimrc,.X.old,.xinitrc,.Xmodmap,.Xresources,.xsessionrc,.zprofile,.zsh_aliases,.zshrc} $HOME/dotfiles/
    stty -echo
    printf "Commit to changes? (y/N)"
    read -rsn1 a
    case $a in
	y) copy
	;;
	*) printf "\n"; exit 0
	;;
    esac
}

copy(){
    printf "\n"
    stty echo
    rsync --delete -a $HOME/.config/{dunst,i3,nvim,qutebrowser,polybar,ranger,wal,compton.conf} ~/dotfiles/.config/
    rsync --delete -a $HOME/.Scripts $HOME/dotfiles
    rsync --delete -a $HOME/{suckless,.latexmkrc,.nvimrc,.profile,.vimrc,.X.old,.xinitrc,.Xmodmap,.Xresources,.xsessionrc,.zprofile,.zsh_aliases,.zshrc} $HOME/dotfiles/
    push
}

push(){
    cd ~/dotfiles/
    git add .
    git commit -a -m "I'm lazy"
    git push -u origin master
    exit 0
}
main
